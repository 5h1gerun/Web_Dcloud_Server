All new features must include tests with pytest. Run `pytest -q` before committing any changes.
